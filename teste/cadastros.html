<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastros</title>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script>
        $(function() {
            $( "#tabs" ).tabs();
            $(".conteiner").draggable({handle: "#nav"});
        });
    </script>

    <style>
    .ui-widget-header {
        border: 1px solid #aaaaaa;
        background: #6b6b6b;
        color: #222222;
        font-weight: bold;
    }

    #tabs {
        max-width: 600px;
        margin: auto;
    }

    #inum {
        width: 100px;
    }

    #itel {
        width: 200px;
    }

    #icnpj {
        width: 200px;
    }

    </style>
</head>
<script>        
        var seletorPrincipal_global="";
        var idRandomGlobal = 1;
function editar(seletorPrincipal){  

                var pro = seletorPrincipal.find(".pro").html();
                seletorPrincipal_global=seletorPrincipal;
                $("#inome").val(pro);

                $("#bt-cadastro").html('Salvar');
                $( "#tabs" ).tabs({ active: 0 });

}
function cadastrar(){

              var pro=$("#inome").val();
              if(pro==""){
                alert("Campo NOME DO PRODUTO inv√°lido!");
                $("#inome").focus();
                return false;
              }
              //deu certo
              var teste='<tr>'+
                            '<th scope="row" class="id">'+idRandomGlobal+'</th>'+
                            '<td class="pro">'+pro+'</td>'+
                            '<td>Otto</td>'+
                            '<td><button type="button" class="btn btn-secondary btn-sm bt-editar">Editar</button> <button type="button" class="btn btn-danger btn-sm bt-remover">Remover</button></td>'+
                        '</tr>';
            
            if(seletorPrincipal_global){
                 seletorPrincipal_global.find(".pro").html($("#inome").val());
                 seletorPrincipal_global="";
                 $( "#tabs" ).tabs({ active: 1 });
                 $("#bt-cadastro").html('Cadastrar');
            }else{
                 $("#lista_produtos").append(teste);
                 $("#inome").focus();
                 idRandomGlobal++;
            }                        
            

            $("#inome").val("");
            
            $(".bt-editar").unbind();
            $(".bt-editar").click(function(){
                editar($(this).parent().parent());
            });

            $(".bt-remover").click(function(){
                $(this).parent().parent().remove();
            });

    
}


    $(document).ready(function() {


        $("#bt-cadastro").click(function(){            
            cadastrar();            
        });
    });
</script>
<body>
    <div id="tabs" class="conteiner">
        <ul style="cursor: move;" id="nav">
            <li><a href="#aba-1">Cadastro</a></li>
            <li><a href="#aba-2">Lista de Produtos</a></li>
            <li><a href="#aba-3">Outros</a></li>
        </ul>
        <div id="aba-1">
            <form action="cadastro.php" method="post" autocomplete="off">
            
                    <div class="form-group">
                        <label for="inome">Nome do produto</label>
                        <input type="text" class="form-control" name="nome" id="inome" required>
                    </div>

                    <button type="button" class="btn btn-primary" id="bt-cadastro">Cadastrar</button>
                
            </form>
        </div>

        <div id="aba-2">
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Produto</th>
                    <th scope="col">Data</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody id="lista_produtos">
                  <!-- <tr>
                    <th scope="row">1</th>
                    <td>Mark</td>
                    <td>Otto</td>
                    <td>@mdo</td>
                  </tr> -->

                </tbody>
              </table>
        </div>
        <div id="aba-3">
            <p>Selecione os produtos desejados</p>
        </div>
    </div>
</body>
</html>